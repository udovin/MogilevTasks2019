\documentclass[12pt]{article}
\input{contests/settings.tex}
\begin{document}
\Editorial{Корневые LCA запросы}{3}

Подвесим дерево за вершину $1$, затем найдем количество вершин $cnt[v]$ в каждом поддереве $v$, а также предпосчитаем $lca$.
Теперь рассмотрим несколько случаев:
\begin{itemize}
	\item вершина $a$ находится в поддереве $c$, вершина $b$ находится в поддереве $c$,
	\item вершина $a$ не находится в поддереве $c$, вершина $b$ находится в поддереве $c$,
	\item вершина $a$ находится в поддереве $c$, вершина $b$ не находится в поддереве $c$,
	\item вершина $a$ не находится в поддереве $c$, вершина $b$ не находится в поддереве $c$.
\end{itemize}

В случае $1$ все просто: если $lca(a, b) = c$, то мы можем подвесить дерево за все
вершины, кроме вершин, которые лежат в поддереве вершины $c$, где лежат вершины $a$ и $b$.
Ответом будет $n -$ количество вершин в поддереве, где лежат вершины $b$ и $a$ соответственно. Для того, чтобы найти это количество, нужно
взять $lca(c, b$ и $a)$, однако при подсчете $lca$ мы возьмем не сам наименьший общий предок, а его потомок в поддереве, где лежат $b$ и $a$ соответственно.
Иначе ответ равен $0$, т.к. вершина $c$ не является наименьшим общим предком и лежит "выше" $lca$.

В случаях $2$ или $3$ мы не можем подвесить за вершины, которые находятся "выше" вершины $c$ и которые лежат соответственно в поддереве $b$ или $a$.
Ответом будет $cnt[c] -$ количество вершин в поддереве, где лежат вершины $b$ или $a$ соответственно. Для того, чтобы найти это количество, нужно
взять $lca(c, b$ или $a)$, однако при подсчете $lca$ мы возьмем не сам наименьший общий предок, а его потомок в поддереве, где лежат $b$ или $a$ соответственно.

В случае $4$ ответ $0$, т.к.вершины $a$ и $b$ лежат выше вершины $c$.

\EndEditorial
\Editorial{Ленивый гонец}{1}

Переберем город, в котором мы начнем наш путь, за $O(n^2)$ просчитаем ответ согласно правилам и возьмем минимум.
\EndEditorial
\Editorial{Выборы}{2}

Заметим, что нам не выгодно голосовать за кандидата $i$, если дорога, которая ведет из города $i$ в его предок, не является проблемной.
Тогда запустим обход в глубину и на выходе из вершины вернем $true$, если мы выбрали кого-то в поддереве(один из $dfs$-ов вернул $true$) или какая-либо дорога к детям
вершины является проблемной(тогда ответ увеличим на 1), иначе $false$.

\EndEditorial

\end{document}
